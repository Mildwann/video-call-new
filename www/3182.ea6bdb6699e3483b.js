"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3182],{3182:(I,g,a)=>{a.r(g),a.d(g,{FirstpagePageModule:()=>M});var m=a(177),f=a(4341),c=a(7125),d=a(7291),u=a(467),e=a(4020),h=a(3656),v=a(4617);const x=["miniViewVideo"];function C(n,r){if(1&n){const s=e.RV6();e.j41(0,"div",12),e.bIt("click",function(){e.eBV(s);const o=e.XpG();return e.Njj(o.tooroom())}),e.nrm(1,"video",13,0),e.j41(3,"div",14),e.nrm(4,"ion-icon",15),e.j41(5,"div",16),e.nrm(6,"ion-icon",17),e.j41(7,"span"),e.EFF(8,"Live Call"),e.k0s()()()()}}const w=[{path:"",component:(()=>{var n;class r{openMiniViewCall(){this.router.navigate(["/home",{peerIdCall:this.callInfo.peerIdOfCaller}])}constructor(t,o,i){this.router=t,this.platform=o,this.peerService=i,this.isInCall=!1,this.peerId="",this.peerIdCallInput="",this.permissionStatus=null,this.showMiniView=!1,this.isreload=!1,this.callInfo={peerId:"",isCallActive:!1,remoteStreamsCount:0}}ionViewWillEnter(){var t=this;return(0,u.A)(function*(){var o;t.isInCall=t.peerService.isInCall();const i=t.router.getCurrentNavigation(),l=history.state;if(null!=l&&l.reload){const p={...l,reload:!1};history.replaceState(p,""),window.location.reload()}if(null!=i&&null!==(o=i.extras)&&void 0!==o&&o.state&&(t.showMiniView=i.extras.state.showMiniView||!1,t.callInfo={peerId:i.extras.state.peerId||"",peerIdOfCaller:i.extras.state.peerIdOfCaller||"",remotepeer:i.extras.state.remotepeer||"",isCallActive:i.extras.state.isCallActive||!1,remoteStreamsCount:i.extras.state.remoteStreamsCount||0}),t.isInCall)try{yield t.peerService.initializeLocalStream(),console.log("Local media stream initialized for active call")}catch(p){console.error("Error initializing media stream:",p)}t.peerService.localStream$.subscribe(p=>{t.updateMiniView()})})()}ngAfterViewInit(){this.showMiniView&&this.setupMiniView()}updateMiniView(){1==this.isInCall&&setTimeout(()=>{this.peerService.localStream$.subscribe(t=>{this.miniViewVideo.nativeElement.srcObject=t})},1e3)}ngOnInit(){var t=this;return(0,u.A)(function*(){var o;console.log("FirstPage initialized"),t.peerService.peerId$.subscribe(l=>{console.log("Our peer ID:",l),t.peerId=l});const i=t.router.getCurrentNavigation();null!=i&&null!==(o=i.extras)&&void 0!==o&&o.state&&(t.showMiniView=i.extras.state.showMiniView||!1,t.callInfo={peerId:i.extras.state.peerId||"",isCallActive:i.extras.state.isCallActive||!1,remoteStreamsCount:i.extras.state.remoteStreamsCount||0},console.log("Received call state:",t.callInfo));try{yield t.peerService.initializeLocalStream(),console.log("Local media stream initialized")}catch(l){console.error("Error initializing media stream:",l),console.log("Camera/Microphone Access Required","Please enable camera and microphone permissions to use this feature.")}})()}setupMiniView(){console.log("Mini View Setup:",this.callInfo)}get isAndroidApp(){return this.platform.is("android")}createRoom(){this.router.navigate(["/home"]).then(()=>{window.location.reload()})}tooroom(){this.router.navigate(["/home"]).then(()=>{})}joinRoom(t){t?this.router.navigate(["/home",{peerIdCall:t}]):alert("Please enter a valid Peer ID")}openJoinPopup(){this.router.navigate([],{skipLocationChange:!0}).then(()=>{const t=document.createElement("ion-alert");t.header="Join a Room",t.subHeader="Enter Peer ID to join a video call",t.message="Please enter the unique peer ID provided to you.",t.inputs=[{name:"peerIdCall",type:"text",placeholder:"Enter Peer ID",value:this.peerIdCallInput,id:"peer-id-input"}],t.buttons=[{text:"Cancel",role:"cancel",handler:()=>t.remove()},{text:"Join",handler:o=>{this.peerIdCallInput=o.peerIdCall,this.joinRoom(o.peerIdCall),t.remove()}}],document.body.appendChild(t),t.present()})}}return(n=r).\u0275fac=function(t){return new(t||n)(e.rXU(d.Ix),e.rXU(h.OD),e.rXU(v.J))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-firstpage"]],viewQuery:function(t,o){if(1&t&&e.GBs(x,5),2&t){let i;e.mGM(i=e.lsd())&&(o.miniViewVideo=i.first)}},standalone:!1,decls:18,vars:2,consts:[["miniViewVideo",""],[3,"translucent"],["color","primary"],[1,"welcome-title"],[1,"container"],[1,"welcome-container"],[1,"logo"],["src","assets/zoom.png","alt","App Logo",1,"app-logo"],[1,"welcome-message"],[1,"create-button",3,"click"],["fill","outline",1,"join-button",3,"click"],["class","mini-view-container",3,"click",4,"ngIf"],[1,"mini-view-container",3,"click"],["autoplay","","muted","","playsinline",""],[1,"mini-view-overlay"],["name","expand",1,"expand-icon"],[1,"call-status"],["name","videocam"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",1)(1,"ion-toolbar",2)(2,"ion-title",3),e.EFF(3,"Welcome to Meeting"),e.k0s()()(),e.j41(4,"ion-content",4)(5,"div",5)(6,"div",6),e.nrm(7,"img",7),e.k0s(),e.j41(8,"div",8)(9,"h2"),e.EFF(10,"Ready to connect with others?"),e.k0s(),e.j41(11,"p"),e.EFF(12,"Join or create a room for your video call."),e.k0s()(),e.j41(13,"ion-button",9),e.bIt("click",function(){return o.createRoom()}),e.EFF(14," Create Room "),e.k0s(),e.j41(15,"ion-button",10),e.bIt("click",function(){return o.openJoinPopup()}),e.EFF(16," Join Rooms "),e.k0s(),e.DNE(17,C,9,0,"div",11),e.k0s()()),2&t&&(e.Y8G("translucent",!0),e.R7$(17),e.Y8G("ngIf",o.isInCall))},dependencies:[m.bT,c.Jm,c.W9,c.eU,c.iq,c.BC,c.ai],styles:[".welcome-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;color:#fff;text-align:center;letter-spacing:1px}.welcome-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;padding:20px;text-align:center;background-color:#1e1f1e}.app-logo[_ngcontent-%COMP%]{width:250px;height:auto;object-fit:contain;margin-bottom:20px;border-radius:8px}.welcome-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:15px;color:#c5c5c5}.welcome-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#817f7f;margin-bottom:40px}.create-button[_ngcontent-%COMP%]{width:350px;font-size:18px;padding:16px;border-radius:10px;transition:background-color .3s,transform .2s}.join-button[_ngcontent-%COMP%]{color:#fff;width:350px;margin:10px;font-size:18px;padding:16px;border-radius:10px;transition:background-color .3s,transform .2s}@media (max-width: 600px){.app-logo[_ngcontent-%COMP%]{width:200px}.welcome-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.action-button[_ngcontent-%COMP%]{font-size:16px;padding:14px}}.mini-view-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;width:120px;height:160px;border-radius:8px;overflow:hidden;box-shadow:0 4px 16px #0000004d;z-index:100;cursor:pointer}.mini-view-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;background:#000;transform:scaleX(-1)}.mini-view-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to top,rgba(0,0,0,.7) 0%,transparent 30%);display:flex;flex-direction:column;justify-content:space-between;padding:8px}.mini-view-overlay[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{align-self:flex-end;color:#fff;font-size:16px}.mini-view-overlay[_ngcontent-%COMP%]   .call-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#fff;font-size:12px}.mini-view-overlay[_ngcontent-%COMP%]   .call-status[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-warning)}"]}),r})()}];let P=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[d.iI.forChild(w),d.iI]}),r})(),M=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[m.MD,f.YN,c.bv,P]}),r})()}}]);